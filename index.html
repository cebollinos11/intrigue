<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medieval Intrigue - Multiplayer Court Politics</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <div class="game-title">‚öîÔ∏è Medieval Intrigue ‚öîÔ∏è</div>
            <div class="game-subtitle">Multiplayer Court Politics & Noble Schemes</div>
        </div>
        
        <!-- Lobby Screen -->
        <div class="lobby-screen active" id="lobbyScreen">
            <div class="lobby-container">
                <div class="lobby-title">üè∞ Enter the Court</div>
                
                <input type="text" id="playerNameInput" class="player-name-input" placeholder="Enter your noble family name..." maxlength="20">
                
                <div class="lobby-buttons">
                    <button class="lobby-btn" id="createRoomBtn">Create Room</button>
                    <button class="lobby-btn" id="joinRoomBtn">Join Room</button>
                </div>
                
                <input type="text" id="roomCodeInput" class="player-name-input" placeholder="Enter room code..." maxlength="10" style="display: none;">
                
                <div id="roomInfo" style="display: none;">
                    <div class="room-code">
                        Room Code: <span id="roomCodeDisplay"></span>
                        <br><small>Share this code with other players</small>
                    </div>
                    
                    <div class="players-in-lobby">
                        <div style="margin-bottom: 15px; font-weight: bold;">Players in Room:</div>
                        <div id="waitingPlayers" class="waiting-players"></div>
                        <button class="lobby-btn start-game-btn" id="startGameBtn" style="display: none;">Start Game</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Board -->
        <div class="game-board" id="gameBoard">
            <div class="main-area">
                <div class="turn-info">
                    <div class="turn-number">Turn <span id="turnNumber">1</span></div>
                    <div id="turnStatus">Choose your action wisely, noble lord...</div>
                </div>
                
                <div class="players-grid" id="playersGrid">
                    <!-- Players will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="sidebar">
                <div class="actions-panel">
                    <div class="actions-title">üè∞ Choose Your Action</div>
                    <div class="actions-grid" id="actionsGrid">
                        <!-- Actions will be populated by JavaScript -->
                    </div>
                    <button class="execute-turn" id="executeTurn" disabled>Submit Action</button>
                </div>
                
                <div class="game-log">
                    <div class="log-title">üìú Court Chronicles</div>
                    <div id="gameLog">
                        <div class="log-entry">The old king sits upon his throne, easily swayed by whispers and gold. The noble families gather, each plotting their rise to power...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="game-over" id="gameOver">
        <div class="game-over-content">
            <div class="game-over-title">üèÜ Victory Achieved! üèÜ</div>
            <div class="winner-announcement" id="winnerText"></div>
            <button class="restart-button" onclick="returnToLobby()">Return to Lobby</button>
        </div>
    </div>

    <!-- Turn Results Popup -->
    <div id="turnPopup" class="popup-overlay" style="display:none;">
    <div class="popup-content">
        <h2>Turn Results</h2>
        <div id="turnPopupContent"></div>
        <button id="closeTurnPopup">OK</button>
    </div>
    </div>

    <style>
    .popup-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    }
    .popup-content {
    background: white;
    padding: 20px;
    border-radius: 10px;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    </style>


    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="medieval-game.js"></script>


</body>
</html>